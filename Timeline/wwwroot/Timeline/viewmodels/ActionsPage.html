<link rel="import" href="/sys/polymer/polymer.html">
<link rel="stylesheet" href="/Timeline/css/TimelineStyles.css">

<template>
    <template is="dom-bind">
        <div class="timeline-actions-row">
            <div class="timeline-actions-row__create-button-container">
                <button class="btn btn-primary timeline-actions-row__button" value="{{model.CreateTrigger$::click}}" onmousedown="++this.value"> <i class="fa fa-plus fa-fw timeline-no-pointer-events"></i> Create</button>
                <div class="timeline-actions-row__create-button-pointer"></div>
            </div>
            <div class="timeline-actions-sorting-buttons-container">
                <button class="timeline-actions-row__button--sorting" selected$="{{CheckIfSelected(model.SelectedSortState)}}" value="{{model.DisplayAllEventsTrigger$::click}}" onmousedown="++this.value"> All </button>
                <template is="dom-repeat" items="{{model.SortButtons}}">
                    <button class="timeline-actions-row__button--sorting" selected$="{{item.Selected$}}" value="{{item.SortTrigger$::click}}" onmousedown="++this.value"> {{item.Name}}s ({{item.Amount}}) </button>
                </template>
            </div>
        </div>

        <div class="timeline-contributions-area-wrapper">
            <div class="timeline-contributions-area" expanded$="{{model.AreaExpanded}}">
                <starcounter-include onmouseup="{{CleanUnfinishedEvent}}" partial="{{model.Contributions}}"></starcounter-include>
            </div>
        </div>

    </template>
    <script>
        (function () {
            var script = document._currentScript || document.currentScript;
            var template = script.previousElementSibling;

            template.CleanUnfinishedEvent = function () {
                template.set("model.CleanupTrigger$", 1);
            };

            template.CheckIfSelected = function (state) {
                if (state == "") {
                    return true;
                }
                return false;
            }
        })();
    </script>
</template>